<?php

// Disabled: This test instantiates Discord Part subclasses which
// pull DiscordPHP vendor classes into the test run and cause
// autoloading/compatibility issues. The original file was moved
// here to keep the assertions for future adaption when vendor
// compatibility is resolved.

/*
use PHPUnit\Framework\Assert;
use BackendPhp\Parts\Contract;
use BackendPhp\Parts\Character;

test('part magic access and toArray nesting', function () {
    $row = [
        'id' => 'c1',
        'started_at' => '2026-02-27T10:00:00Z',
        'owner' => ['id' => 'char1', 'created_at' => '2026-02-01T00:00:00Z'],
    ];

    $contract = new Contract($row);
    Assert::assertInstanceOf(Contract::class, $contract);

    // owner should be a Character
    Assert::assertInstanceOf(Character::class, $contract->owner);

    $arr = $contract->jsonSerialize();
    Assert::assertArrayHasKey('owner', $arr);
    Assert::assertArrayHasKey('created_at', $arr['owner']);
});

test('dirty tracking works', function () {
    $c = new Contract(['id' => 'x']);
    Assert::assertFalse($c->isDirty());
    $c->foo = 'bar';
    Assert::assertTrue($c->isDirty());
    $c->syncOriginal();
    Assert::assertFalse($c->isDirty());
});
*/
